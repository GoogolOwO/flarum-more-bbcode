(()=>{var t={n:o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return t.d(e,{a:e}),e},d:(o,e)=>{for(var r in e)t.o(e,r)&&!t.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:e[r]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o);const e=flarum.core.compat["common/app"];var r=t.n(e);const n=flarum.core.compat.extend,i=flarum.core.compat["components/TextEditor"];var a=t.n(i);function s(t,o){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},s(t,o)}const c=flarum.core.compat["common/extend"],l=flarum.core.compat["common/components/Button"];var u=t.n(l);const d=flarum.core.compat["common/Component"];var f=t.n(d);const p=flarum.core.compat["common/components/Dropdown"];var h=t.n(p);const b=flarum.core.compat["common/utils/ItemList"];var g=t.n(b);const v=flarum.core.compat["common/helpers/icon"];var x=t.n(v);const E=flarum.core.compat["forum/components/CommentPost"];var C=t.n(E);const y=flarum.core.compat["forum/components/DiscussionPage"];var _=t.n(y);const k=flarum.core.compat["forum/utils/DiscussionControls"];var T=t.n(k);const A=flarum.core.compat["forum/components/LogInModal"];var S=t.n(A);const w=flarum.core.compat["forum/components/PostStream"];var R=t.n(w);const N=flarum.core.compat["components/Separator"];var L=t.n(N);const O=flarum.core.compat["forum/components/ComposerPostPreview"];var j=t.n(O),M=function(t){var o,e;function n(){return t.apply(this,arguments)||this}e=t,(o=n).prototype=Object.create(e.prototype),o.prototype.constructor=o,s(o,e);var i=n.prototype;return i.view=function(){return h().component({className:"More-bbcode-buttonsDropdown",buttonClassName:"Button Button--flat",label:x()("fas fa-th-large")},this.items().toArray())},i.items=function(){var t=this,o=new(g());o.add("left",u().component({icon:"fas fa-align-center",onclick:function(){return t.left()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_left")),50),o.add("center",u().component({icon:"fas fa-align-center",onclick:function(){return t.center()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_center")),0),o.add("right",u().component({icon:"fas fa-align-right",onclick:function(){return t.right()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_right")),0),o.add("justify",u().component({icon:"fas fa-align-justify",onclick:function(){return t.justify()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_justify")),0),o.add("dropcap",u().component({icon:"fas fa-list-alt",onclick:function(){return t.dropcap()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_dropcap")),0),o.add("ileft",u().component({icon:"fas fa-fast-backward",onclick:function(){return t.ileft()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_img_left")),0),o.add("iright",u().component({icon:"fas fa-fast-forward",onclick:function(){return t.iright()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_img_right")),0),o.add("pleft",u().component({icon:"fas fa-outdent",onclick:function(){return t.pleft()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_p_left")),0),o.add("pright",u().component({icon:"fas fa-indent",onclick:function(){return t.pright()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_p_right")),0),o.add("details",u().component({icon:"fas fa-eye-slash",onclick:function(){return t.details()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_details")),0),o.add("reply",u().component({icon:"fas fa-reply-all",onclick:function(){return t.reply()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_reply")),0),o.add("login",u().component({icon:"fas fa-sign-in-alt",onclick:function(){return t.login()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_login")),0),o.add("imeepo-cloud",u().component({icon:"fas fa-download",onclick:function(){return t.cloud()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_cloud")),0),o.add("audio",u().component({icon:"fas fa-file-audio",onclick:function(){return t.audio()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_audio")),0),o.add("clip",u().component({icon:"fas fa-file-video",onclick:function(){return t.clip()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_clip")),0),o.add("table",u().component({icon:"fas fa-file-video",onclick:function(){return t.insertTable()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_table")),0),o.add("word",u().component({icon:"fas fa-file-word",onclick:function(){return t.insertWord()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_word")),0),o.add("size",u().component({icon:"fas fa-text-height",onclick:function(){return t.insertSize()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_size")),0),o.add("color",u().component({icon:"fas fa-palette",onclick:function(){return t.insertColor()}},r().translator.trans("imeepo-more-bbcode.forum.button_tooltip_color")),0);var e=JSON.parse(r().forum.attribute("editorSymbols")||"[]");if(e.length>0){o.add("sep",L().component());var n=function(){var r=e[i];o.add("symbol-"+i,u().component({children:r.label||r.insert,className:"Button",onclick:function(){return t.insertAtCursor(r.insert)}}))};for(var i in e)n()}return o},i.left=function(){this.attrs.textEditor.insertAtCursor("[left][/left]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-7)},i.right=function(){this.attrs.textEditor.insertAtCursor("[right][/right]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-8)},i.center=function(){this.attrs.textEditor.insertAtCursor("[center][/center]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-9)},i.justify=function(){this.attrs.textEditor.insertAtCursor("[justify][/justify]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-10)},i.dropcap=function(){this.attrs.textEditor.insertAtCursor("[dropcap][/dropcap]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-10)},i.ileft=function(){this.attrs.textEditor.insertAtCursor("[ileft][/ileft]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-8)},i.iright=function(){this.attrs.textEditor.insertAtCursor("[iright][/iright]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-9)},i.pleft=function(){this.attrs.textEditor.insertAtCursor("[pleft][/pleft]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-8)},i.pright=function(){this.attrs.textEditor.insertAtCursor("[pright][/pright]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-9)},i.details=function(){this.attrs.textEditor.insertAtCursor("[details=?][/details]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-10)},i.reply=function(){this.attrs.textEditor.insertAtCursor("[reply][/reply]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-8)},i.login=function(){this.attrs.textEditor.insertAtCursor("[login][/login]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-8)},i.like=function(){this.attrs.textEditor.insertAtCursor("[like][/like]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-7)},i.cloud=function(){this.attrs.textEditor.insertAtCursor("[cloud type=other title=title url=link]Password[/cloud]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-8)},i.audio=function(){this.attrs.textEditor.insertAtCursor('[audio mp3="URL"]')},i.clip=function(){this.attrs.textEditor.insertAtCursor('[clip mp4="URL"]')},i.insertTable=function(t){this.attrs.textEditor.insertAtCursor("|Column|Column|Column|Column|\n|---|---|---|---|\n| row  |  row | row | row  |\n")},i.insertWord=function(){this.attrs.textEditor.insertAtCursor("[GDOC][/GDOC]\n");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-7)},i.insertSize=function(){this.attrs.textEditor.insertAtCursor("[SIZE=16][/SIZE]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-7)},i.insertColor=function(){this.attrs.textEditor.insertAtCursor("[COLOR=red][/COLOR]");var t=this.attrs.textEditor.getSelectionRange();this.attrs.textEditor.moveCursorTo(t[1]-8)},n}(f());r().initializers.add("litalino/more-bbcode",(function(){(0,c.extend)(C().prototype,"content",(function(){r().session.user&&r().current.matches(_())?($(".reply2see_reply").off("click").on("click",(function(){return T().replyAction.call(r().current.get("discussion"),!0,!1)})),$(".like2see_like").off("click").on("click",(function(){return T().likesAction.call(r().current.get("discussion"),!0,!1)}))):($(".reply2see_reply").off("click").on("click",(function(){return r().modal.show(S())})),$(".login2see_login").off("click").on("click",(function(){return r().modal.show(S())})),$(".like2see_like").off("click").on("click",(function(){return r().modal.show(S())})))})),(0,c.extend)(R().prototype,"oncreate",(function(){!function(){var t=document.getElementsByClassName("Post-body");if(0!=t.length)for(var o=0;o<t.length;o++)for(var e=t[o].getElementsByClassName("bbextend-gdoc"),r=0;r<e.length;r++){var n=e[r],i=n.getElementsByTagName("a")[0].getAttribute("href");if(n.classList.remove("bbextend-gdoc"),i.startsWith("https://docs.google.com/document/d/")){n.innerHTML='<i class="fas fa-ellipsis fa-fade"></i> Loading Google Doc...',i=i.substring(0,i.lastIndexOf("/"));var a=new XMLHttpRequest;a.open("GET",i+"/pub",!0),a.responseType="document",a.onload=function(){if(200==this.status){var t=this.responseXML.getElementsByTagName("body")[0].innerHTML;n.innerHTML=t;for(var o=n.childNodes[1];n.firstChild;)n.removeChild(n.firstChild);n.appendChild(o);var e=n.childNodes[0].childNodes[0].innerHTML,r=n.childNodes[0].childNodes[1],a={};e.split("}").forEach((function(t){var o=t.split("{"),e=o[0],r=o[1];r&&(a[e]=r+";")})),n.childNodes[0].removeChild(n.childNodes[0].childNodes[0]),function t(o){if(o.childNodes.length>0)for(var e=0;e<o.childNodes.length;e++)t(o.childNodes[e]);if(o.className){var r=o.className.split(" "),n="";r.forEach((function(t){n+=a["."+t]})),o.setAttribute("style",n+P),o.removeAttribute("class")}}(r);var s=r.getAttribute("style").split(";");s.forEach((function(t,o){t.includes("max-width")&&(s[o]="max-width: 100%")})),r.setAttribute("style","color: #000;"+s.join(";"));var c=document.createElement("a");c.setAttribute("href",i),c.setAttribute("target","_blank"),c.innerHTML='<i class="fas fa-file-word"></i> View Google Doc',n.appendChild(c)}},a.onerror=function(){n.innerHTML='<i class="fas fa-triangle-exclamation"></i> Failed to load Google Doc'},a.send()}else n.innerHTML='<i class="fas fa-triangle-exclamation"></i> Invalid Google Doc URL'}}()}));var t=0,o=function(){this.$(".tabs").each((function(o,e){var r=$(e);if(!r.find('input[type="radio"][name]').length){var n=r.find('> .tab > input[type="radio"]');if(n.length){var i=r.find(".tab"),a=t++;n.attr("name","tab-group-"+a),n.is("[checked]")||n[0].setAttribute("checked","checked"),i.each((function(t,o){var e=$(o),r="tab-"+a+"-"+ ++t;e.find('input[type="radio"]').attr("id",r),e.find("label").attr("for",r)}))}}}))};(0,c.extend)(C().prototype,["oncreate","onupdate"],o),(0,c.extend)(j().prototype,"oncreate",(function(){var t=this;(0,c.extend)(this.attrs,"surround",(function(){return o.call(t)}))}))}));var P="margin-bottom: 0;";r().initializers.add("litalino-more-bbcode",(function(){(0,n.extend)(a().prototype,"toolbarItems",(function(t){t.add("litalino-more-bbcode",m(M,{textEditor:this.attrs.composer.editor}))}))}),-500)})(),module.exports=o})();
//# sourceMappingURL=forum.js.map
